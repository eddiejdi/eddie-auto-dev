<mxfile host="app.diagrams.net" modified="2026-03-01T18:10:00.000Z" agent="Eddie Auto-Dev" version="24.0.0" type="device">
  <diagram id="pipeline-v4" name="Multi-Agent Collaborative Pipeline v4.0">
    <mxGraphModel dx="1800" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- â•â•â•â•â•â•â•â•â•â• TÃTULO â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="title" value="&lt;b&gt;LLM Optimizer v4.0 â€” Multi-Agent Collaborative Pipeline&lt;/b&gt;&lt;br&gt;Homelab Dual-GPU + 21 Agentes | Porto 8512" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="400" y="10" width="620" height="50" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• ENTRADA â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="client" value="&lt;b&gt;Cliente&lt;/b&gt;&lt;br&gt;(Cline / curl / API)" style="shape=actor;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="670" y="70" width="80" height="60" as="geometry" />
        </mxCell>

        <mxCell id="proxy" value="&lt;b&gt;LLM Optimizer Proxy&lt;/b&gt;&lt;br&gt;FastAPI :8512&lt;br&gt;&lt;font color=&quot;#666666&quot; style=&quot;font-size:9px&quot;&gt;/api/chat&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=11;arcSize=12;" vertex="1" parent="1">
          <mxGeometry x="620" y="160" width="180" height="60" as="geometry" />
        </mxCell>

        <mxCell id="edge_client_proxy" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;strokeWidth=2;" edge="1" source="client" target="proxy" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• CLASSIFY COMPLEXITY â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="classify" value="&lt;b&gt;classify_complexity()&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;tokens + patterns + turns&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;aspect=auto;" vertex="1" parent="1">
          <mxGeometry x="620" y="260" width="180" height="80" as="geometry" />
        </mxCell>

        <mxCell id="edge_proxy_classify" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#333333;strokeWidth=2;" edge="1" source="proxy" target="classify" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• 5 BRANCHES â•â•â•â•â•â•â•â•â•â• -->

        <!-- LIGHT -->
        <mxCell id="light" value="&lt;b&gt;LIGHT&lt;/b&gt;&lt;br&gt;GPU1 qwen3:1.7b&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;&amp;lt;20 tokens&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="410" width="130" height="50" as="geometry" />
        </mxCell>

        <!-- MEDIUM -->
        <mxCell id="medium" value="&lt;b&gt;MEDIUM&lt;/b&gt;&lt;br&gt;GPU1 qwen3:0.6b&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;20-50 tokens&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="250" y="410" width="130" height="50" as="geometry" />
        </mxCell>

        <!-- COLLABORATIVE (destaque) -->
        <mxCell id="collab" value="&lt;b&gt;âš¡ COLLABORATIVE&lt;/b&gt;&lt;br&gt;Multi-Agent Pipeline&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;20-5000 tok + 2+ patterns&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=11;strokeWidth=3;" vertex="1" parent="1">
          <mxGeometry x="610" y="400" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- HEAVY -->
        <mxCell id="heavy" value="&lt;b&gt;HEAVY&lt;/b&gt;&lt;br&gt;GPU0 qwen3:8b&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;tool-calling / &amp;gt;5000 tok&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1000" y="410" width="130" height="50" as="geometry" />
        </mxCell>

        <!-- MAPREDUCE -->
        <mxCell id="mapreduce" value="&lt;b&gt;MAPREDUCE&lt;/b&gt;&lt;br&gt;MAP(0.6b) + REDUCE(4b)&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;&amp;gt;50K tokens&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1200" y="410" width="140" height="50" as="geometry" />
        </mxCell>

        <!-- Edges from classify -->
        <mxCell id="e_light" value="light" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#82b366;fontSize=9;fontColor=#82b366;" edge="1" source="classify" target="light" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_medium" value="medium" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#82b366;fontSize=9;fontColor=#82b366;" edge="1" source="classify" target="medium" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_collab" value="collaborative" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;strokeWidth=3;fontSize=10;fontColor=#9673a6;fontStyle=1;" edge="1" source="classify" target="collab" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_heavy" value="heavy" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#b85450;fontSize=9;fontColor=#b85450;" edge="1" source="classify" target="heavy" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_mapreduce" value="mapreduce" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#b85450;fontSize=9;fontColor=#b85450;" edge="1" source="classify" target="mapreduce" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• COLLABORATIVE PIPELINE (Detalhe) â•â•â•â•â•â•â•â•â•â• -->

        <!-- ContÃªiner principal -->
        <mxCell id="collab_container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#9673a6;dashed=1;dashPattern=8 8;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="270" y="500" width="880" height="420" as="geometry" />
        </mxCell>
        <mxCell id="collab_label" value="&lt;b&gt;collaborative_reasoning()&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=top;fillColor=none;strokeColor=none;fontSize=12;fontColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="280" y="505" width="250" height="20" as="geometry" />
        </mxCell>

        <!-- Step 1: select_relevant_agents -->
        <mxCell id="select_agents" value="&lt;b&gt;select_relevant_agents()&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;Keyword matching Ã— weight&lt;br&gt;Top 5 agents from 21&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="560" y="530" width="190" height="50" as="geometry" />
        </mxCell>

        <mxCell id="e_collab_select" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" source="collab" target="select_agents" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- PARALLEL FORK -->
        <mxCell id="fork" value="" style="shape=line;html=1;strokeWidth=4;strokeColor=#9673a6;fontSize=10;fillColor=none;rotation=0;" vertex="1" parent="1">
          <mxGeometry x="360" y="615" width="600" height="10" as="geometry" />
        </mxCell>
        <mxCell id="fork_label" value="&lt;b&gt;asyncio.gather()&lt;/b&gt; â€” 3 Tracks Paralelos" style="text;html=1;align=center;fontSize=10;fontColor=#9673a6;fillColor=none;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="480" y="595" width="260" height="20" as="geometry" />
        </mxCell>

        <mxCell id="e_select_fork" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" source="select_agents" target="fork" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- TRACK A: GPU0 -->
        <mxCell id="track_a" value="&lt;b&gt;Track A â€” GPU0&lt;/b&gt;&lt;br&gt;ðŸ”¬ Deep Analysis&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;RTX 2060 SUPER (8GB)&lt;br&gt;qwen3:8b | timeout 45s&lt;br&gt;num_predict: 512&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="290" y="650" width="170" height="80" as="geometry" />
        </mxCell>

        <!-- TRACK B: GPU1 -->
        <mxCell id="track_b" value="&lt;b&gt;Track B â€” GPU1&lt;/b&gt;&lt;br&gt;âš¡ Quick Hypothesis&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;GTX 1050 (2GB)&lt;br&gt;qwen3:1.7b | ~1.5s&lt;br&gt;num_predict: 256&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="560" y="650" width="170" height="80" as="geometry" />
        </mxCell>

        <!-- TRACK C: Agents -->
        <mxCell id="track_c" value="&lt;b&gt;Track C â€” Agents API&lt;/b&gt;&lt;br&gt;ðŸ¤– Specialized Agents&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;localhost:8503 | timeout 15s&lt;br&gt;invoke_agents_parallel()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="830" y="650" width="170" height="80" as="geometry" />
        </mxCell>

        <mxCell id="e_fork_a" style="rounded=1;strokeColor=#b85450;strokeWidth=2;" edge="1" source="fork" target="track_a" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_fork_b" style="rounded=1;strokeColor=#82b366;strokeWidth=2;" edge="1" source="fork" target="track_b" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_fork_c" style="rounded=1;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" source="fork" target="track_c" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- AGENT DETAIL BOXES -->
        <mxCell id="agent_rag" value="ðŸ“š RAG&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;POST /rag/search&lt;br&gt;~7.5K chars&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="830" y="750" width="80" height="45" as="geometry" />
        </mxCell>
        <mxCell id="agent_sec" value="ðŸ”’ Security&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;GET /security/*&lt;br&gt;~476 chars&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="920" y="750" width="80" height="45" as="geometry" />
        </mxCell>
        <mxCell id="agent_perf" value="ðŸ“ˆ Perf&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;GET /performance/*&lt;br&gt;~652 chars&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1010" y="750" width="80" height="45" as="geometry" />
        </mxCell>

        <mxCell id="e_tc_rag" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="track_c" target="agent_rag" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_tc_sec" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="track_c" target="agent_sec" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_tc_perf" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="track_c" target="agent_perf" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- PARALLEL JOIN -->
        <mxCell id="join" value="" style="shape=line;html=1;strokeWidth=4;strokeColor=#9673a6;fontSize=10;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="360" y="820" width="600" height="10" as="geometry" />
        </mxCell>

        <mxCell id="e_a_join" style="rounded=1;strokeColor=#b85450;strokeWidth=2;" edge="1" source="track_a" target="join" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_b_join" style="rounded=1;strokeColor=#82b366;strokeWidth=2;" edge="1" source="track_b" target="join" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_rag_join" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="agent_rag" target="join" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_sec_join" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="agent_sec" target="join" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e_perf_join" style="rounded=1;strokeColor=#6c8ebf;" edge="1" source="agent_perf" target="join" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ENRICHMENT -->
        <mxCell id="enrich" value="&lt;b&gt;Enriquecimento Direto&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;GPU0 response + agent insights&lt;br&gt;Sem segunda chamada LLM (~0.0s)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="540" y="855" width="230" height="50" as="geometry" />
        </mxCell>

        <mxCell id="e_join_enrich" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" source="join" target="enrich" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• RESPONSE â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="response" value="&lt;b&gt;Response&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;StreamingResponse (NDJSON)&lt;br&gt;ou JSONResponse&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="580" y="950" width="160" height="50" as="geometry" />
        </mxCell>

        <mxCell id="e_enrich_resp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;strokeWidth=2;" edge="1" source="enrich" target="response" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Light/Medium/Heavy/MapReduce also go to response -->
        <mxCell id="e_light_resp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#82b366;dashed=1;" edge="1" source="light" target="response" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="145" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_medium_resp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#82b366;dashed=1;" edge="1" source="medium" target="response" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="315" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_heavy_resp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#b85450;dashed=1;" edge="1" source="heavy" target="response" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1065" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="e_mr_resp" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#b85450;dashed=1;" edge="1" source="mapreduce" target="response" parent="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1270" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• GPU BOXES (Hardware) â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="gpu0_hw" value="&lt;b&gt;GPU 0&lt;/b&gt;&lt;br&gt;NVIDIA RTX 2060 SUPER&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;8 GB VRAM | :11434&lt;br&gt;qwen3:8b (5.2 GB)&lt;br&gt;~31 tok/s&lt;/font&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;size=15;" vertex="1" parent="1">
          <mxGeometry x="60" y="590" width="170" height="80" as="geometry" />
        </mxCell>

        <mxCell id="gpu1_hw" value="&lt;b&gt;GPU 1&lt;/b&gt;&lt;br&gt;NVIDIA GTX 1050&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;2 GB VRAM | :11435&lt;br&gt;qwen3:1.7b (1.5 GB)&lt;br&gt;~37-47 tok/s&lt;/font&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;size=15;" vertex="1" parent="1">
          <mxGeometry x="60" y="700" width="170" height="80" as="geometry" />
        </mxCell>

        <mxCell id="api_hw" value="&lt;b&gt;Agents API&lt;/b&gt;&lt;br&gt;localhost:8503&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;21 agentes registrados&lt;br&gt;FastAPI | 96 routes&lt;/font&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;size=15;" vertex="1" parent="1">
          <mxGeometry x="60" y="810" width="170" height="80" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• WARMUP BOX â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="warmup" value="&lt;b&gt;Auto-Warmup&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;lifespan() â†’ asyncio.create_task&lt;br&gt;GPU0: qwen3:8b keep_alive=3600s&lt;br&gt;GPU1: qwen3:1.7b keep_alive=3600s&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="60" y="510" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• ENDPOINTS BOX â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="endpoints" value="&lt;b&gt;Endpoints&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;GET /health&lt;br&gt;GET /api/gpu/stats ðŸ“Š&lt;br&gt;GET /api/collaborative/stats&lt;br&gt;GET /metrics (Prometheus)&lt;br&gt;GET /api/tags&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#999999;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1200" y="530" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• BUS PUBLISH â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="bus" value="&lt;b&gt;Communication Bus&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:9px&quot;&gt;_fire_and_forget_publish()&lt;br&gt;POST /communication/publish&lt;/font&gt;" style="shape=cylinder3;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=9;size=8;boundedLbl=1;" vertex="1" parent="1">
          <mxGeometry x="1200" y="700" width="150" height="60" as="geometry" />
        </mxCell>

        <mxCell id="e_enrich_bus" value="fire &amp; forget" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#9673a6;dashed=1;fontSize=8;fontColor=#9673a6;" edge="1" source="enrich" target="bus" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• LEGENDA â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="legend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fafafa;strokeColor=#cccccc;" vertex="1" parent="1">
          <mxGeometry x="1200" y="830" width="200" height="170" as="geometry" />
        </mxCell>
        <mxCell id="legend_title" value="&lt;b&gt;Legenda&lt;/b&gt;" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1210" y="835" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg1" value="&lt;font color=&quot;#b85450&quot;&gt;â– &lt;/font&gt; GPU0 â€” RTX 2060S (Heavy)" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="858" width="180" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg2" value="&lt;font color=&quot;#82b366&quot;&gt;â– &lt;/font&gt; GPU1 â€” GTX 1050 (Light)" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="876" width="180" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg3" value="&lt;font color=&quot;#6c8ebf&quot;&gt;â– &lt;/font&gt; Agents API (:8503)" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="894" width="180" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg4" value="&lt;font color=&quot;#9673a6&quot;&gt;â– &lt;/font&gt; Collaborative Pipeline" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="912" width="180" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg5" value="&lt;font color=&quot;#d6b656&quot;&gt;â– &lt;/font&gt; DecisÃ£o / ClassificaÃ§Ã£o" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1210" y="930" width="180" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg_perf" value="&lt;b&gt;Performance: ~12-15s total&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:8px&quot;&gt;(antes: 158s â†’ 10x mais rÃ¡pido)&lt;/font&gt;" style="text;html=1;align=left;fillColor=none;strokeColor=none;fontSize=10;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="1210" y="955" width="180" height="35" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• AGENT REGISTRY SIDE BOX â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="registry" value="&lt;b&gt;AGENT_REGISTRY (21 agents)&lt;/b&gt;&lt;hr&gt;&lt;font style=&quot;font-size:8px&quot;&gt;&lt;b&gt;Language (8):&lt;/b&gt; python, javascript,&lt;br&gt;typescript, go, rust, java, csharp, php&lt;br&gt;&lt;b&gt;Specialized (11):&lt;/b&gt; rag (w=15),&lt;br&gt;security, performance, review,&lt;br&gt;data, bpm, confluence, opensearch,&lt;br&gt;homelab, banking, instructor&lt;br&gt;&lt;b&gt;Infra (2):&lt;/b&gt; google_assistant,&lt;br&gt;product_owner&lt;/font&gt;" style="shape=note;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=9;size=14;align=left;spacingLeft=8;" vertex="1" parent="1">
          <mxGeometry x="1200" y="130" width="200" height="170" as="geometry" />
        </mxCell>

        <!-- â•â•â•â•â•â•â•â•â•â• TIMING ANNOTATIONS â•â•â•â•â•â•â•â•â•â• -->
        <mxCell id="time_a" value="~12-15s" style="text;html=1;fillColor=none;strokeColor=none;fontSize=9;fontColor=#b85450;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="290" y="735" width="60" height="15" as="geometry" />
        </mxCell>
        <mxCell id="time_b" value="~1.5s" style="text;html=1;fillColor=none;strokeColor=none;fontSize=9;fontColor=#82b366;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="735" width="50" height="15" as="geometry" />
        </mxCell>
        <mxCell id="time_c" value="~1.5s" style="text;html=1;fillColor=none;strokeColor=none;fontSize=9;fontColor=#6c8ebf;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="830" y="735" width="50" height="15" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
