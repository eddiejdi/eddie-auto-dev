version: '3.8'
services:
  homelab-copilot-agent:
    build:
      context: ..
      dockerfile: homelab_copilot_agent/Dockerfile
    image: homelab-copilot-agent:latest
    container_name: homelab-copilot-agent
    restart: unless-stopped
    network_mode: host
    environment:
    - PORT=8085
    - OLLAMA_HOST=http://127.0.0.1:11434
    - OLLAMA_MODEL=eddie-homelab:latest
    - DATABASE_URL=postgresql://postgres:eddie_memory_2026@127.0.0.1:5432/postgres
    - API_BASE_URL=http://127.0.0.1:8503
    - SCHEDULER_PERFORMANCE_INTERVAL=30
    - SCHEDULER_SECURITY_INTERVAL=120
    - SCHEDULER_ARCHITECTURE_INTERVAL=360
    - RAG_REPO_ROOT=/repo
    volumes:
    - /home/homelab/eddie-auto-dev:/repo:ro
